#include <stdio.h>
 /* cat: concatenate files, version 2 */
 int main(int argc, char *argv[])
 {
 FILE *fp1, *fp2;
 void filecompare(FILE *, FILE *);
 char *prog = argv[0]; /* program name for errors */
 if (argc == 1 ) { return 1;} /* no args; copy standard input */
 else
 while (--argc > 0){
 if ((fp1 = fopen(argv[1], "r")) == NULL) {
 fprintf(stderr, "%s: can't open %s\n", prog, *argv);
 return 1;
 }
  if ((fp2 = fopen(argv[2], "r")) == NULL) {
 fprintf(stderr, "%s: can't open %s\n", prog, *argv);
 return 1;
  }
  filecompare(fp1, fp2);
 }
 return 0;
 }

 void filecompare(FILE *fp1, FILE *fp2)
{
    int f1, f2;
    while (1) {
        if ((f1 = getc(fp1)) == EOF)
            break;
        if ((f2 = getc(fp2)) == EOF)
            break;
        if (f1 != f2) {
            putchar(f1);
            putchar(f2);
            break;
        }
    }
}
